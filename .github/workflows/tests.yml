name: "Run unit tests"

on:
  push:
    branches:
    - "main"

env:
  PROJECT_SOLUTION: "src/Trailblazor.Routing.sln"

jobs:
  test:
    name: "Run Trailblazor.Routing unit tests"
    runs-on: "ubuntu-latest"
    steps:
    - name: "Checkout"
      uses: "actions/checkout@v4"
      with:
        fetch-depth: 0

    - name: "Setup .NET"
      uses: "actions/setup-dotnet@v4"
      with:
        dotnet-version: 8.0.x

    - name: "Restore dependencies"
      run: "dotnet restore ${{ env.PROJECT_SOLUTION }}"

    - name: "Build project"
      run: "dotnet build ${{ env.PROJECT_SOLUTION }} --no-restore --configuration Release"

    - name: "Run tests"
      run: "dotnet test ${{ env.PROJECT_SOLUTION }} --no-restore --no-build"
